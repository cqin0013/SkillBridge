import{r as i,j as e,B as k}from"./index-B-sSpqYw.js";function w(r){return new Promise(n=>{window.setTimeout(()=>n(),900)})}function N(r){return!!r&&/\S+@\S+\.\S+/.test(r)}function F(){const[r,n]=i.useState({name:"",email:"",category:"",message:"",consent:!1,website:""}),[a,g]=i.useState({}),[l,f]=i.useState(!1),[h,x]=i.useState(!1),[p,o]=i.useState(""),c=i.useRef(null),d=i.useRef(null),m=i.useRef(null),u=i.useRef(null),b=i.useRef(null),v=t=>{const s={};return t.category||(s.category="Please choose a category."),t.message.trim()||(s.message="Please describe your feedback."),t.email&&!N(t.email)&&(s.email="Please provide a valid email."),t.consent||(s.consent="Please confirm you agree to our privacy notice."),t.website.trim()&&(s.website="Spam detected."),s},y=t=>{if(t.category&&m.current)return m.current.focus();if(t.message&&u.current)return u.current.focus();if(t.email&&d.current)return d.current.focus();if(t.consent&&b.current)return b.current.focus();c.current&&c.current.focus()},j=async t=>{t.preventDefault(),x(!1),o("");const s=v(r);if(g(s),Object.keys(s).length>0){y(s);return}f(!0),o("Sending feedback…");try{await w(r),x(!0),o("Thanks! Your feedback has been received."),n({name:"",email:"",category:"",message:"",consent:!1,website:""})}catch{o("Something went wrong. Please try again.")}finally{f(!1)}};return e.jsxs("main",{className:"mx-auto max-w-3xl px-4 py-12",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-extrabold text-ink",children:"Send Feedback"}),e.jsx("p",{className:"mt-3 text-ink-soft",children:"We value your input. Tell us what works well and what could be improved."})]}),e.jsx("p",{"aria-live":"polite",className:"sr-only",children:p}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fb-name",className:"block text-sm font-medium text-ink",children:"Name (optional)"}),e.jsx("input",{id:"fb-name",ref:c,type:"text",autoComplete:"name",value:r.name,onChange:t=>n(s=>({...s,name:t.target.value})),className:"mt-2 h-11 w-full rounded-full border border-border px-4 outline-none focus-visible:ring-2 focus-visible:ring-primary/40",placeholder:"Your name",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fb-email",className:"block text-sm font-medium text-ink",children:"Email (optional)"}),e.jsx("input",{id:"fb-email",ref:d,type:"email",inputMode:"email",autoComplete:"email",value:r.email,onChange:t=>n(s=>({...s,email:t.target.value})),"aria-invalid":!!a.email||void 0,"aria-describedby":a.email?"fb-email-err":void 0,className:"mt-2 h-11 w-full rounded-full border border-border px-4 outline-none focus-visible:ring-2 focus-visible:ring-primary/40",placeholder:"you@example.com",disabled:l}),a.email&&e.jsx("p",{id:"fb-email-err",className:"mt-2 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fb-category",className:"block text-sm font-medium text-ink",children:"Category *"}),e.jsxs("select",{id:"fb-category",ref:m,value:r.category,onChange:t=>n(s=>({...s,category:t.target.value})),"aria-invalid":!!a.category||void 0,"aria-describedby":a.category?"fb-category-err":void 0,className:"mt-2 h-11 w-full rounded-full border border-border px-4 outline-none bg-white focus-visible:ring-2 focus-visible:ring-primary/40",disabled:l,children:[e.jsx("option",{value:"",children:"Select a category…"}),e.jsx("option",{value:"Bug",children:"Bug"}),e.jsx("option",{value:"Feature request",children:"Feature request"}),e.jsx("option",{value:"Idea",children:"Idea"}),e.jsx("option",{value:"Other",children:"Other"})]}),a.category&&e.jsx("p",{id:"fb-category-err",className:"mt-2 text-sm text-red-600",children:a.category})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fb-message",className:"block text-sm font-medium text-ink",children:"Message *"}),e.jsx("textarea",{id:"fb-message",ref:u,value:r.message,onChange:t=>n(s=>({...s,message:t.target.value})),"aria-invalid":!!a.message||void 0,"aria-describedby":a.message?"fb-message-err":void 0,className:"mt-2 min-h-[140px] w-full rounded-2xl border border-border p-4 outline-none focus-visible:ring-2 focus-visible:ring-primary/40",placeholder:"Describe the issue or your idea…",disabled:l}),a.message&&e.jsx("p",{id:"fb-message-err",className:"mt-2 text-sm text-red-600",children:a.message})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{id:"fb-consent",ref:b,type:"checkbox",checked:r.consent,onChange:t=>n(s=>({...s,consent:t.target.checked})),"aria-invalid":!!a.consent||void 0,"aria-describedby":a.consent?"fb-consent-err":void 0,className:"mt-1 h-5 w-5 rounded border-border text-primary focus-visible:ring-2 focus-visible:ring-primary/40",disabled:l}),e.jsx("label",{htmlFor:"fb-consent",className:"text-sm text-ink",children:"I agree that my feedback may be stored and processed to improve the product."})]}),a.consent&&e.jsx("p",{id:"fb-consent-err",className:"text-sm text-red-600",children:a.consent}),e.jsxs("div",{"aria-hidden":"true",className:"hidden",children:[e.jsx("label",{htmlFor:"fb-website",children:"Website"}),e.jsx("input",{id:"fb-website",type:"text",value:r.website,onChange:t=>n(s=>({...s,website:t.target.value})),tabIndex:-1,autoComplete:"off"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx(k,{size:"lg",variant:"primary",loading:l,disabled:l,type:"submit",children:l?"Sending…":"Submit feedback"}),h&&!l&&e.jsx("p",{className:"mt-3 text-sm text-green-700",children:"Your feedback was submitted successfully."})]})]})]})}export{F as default};
